<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习越南语请联系Wx:XiDeYueNanYu</title>
    <style>
        body {
            background-color: #f7fbf3;
            margin-bottom: 60px;
        }
        #infoBox { 
            width: 100%; 
                        max-width: 700px;
            height: 100px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: clamp(40px, 5vw, 60px);
            font-weight: bold;
        }
        #contactBox { 
            width: 100%; 
                        max-width: 700px;
            height: 45px; 
            margin: 0px auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: left; 
            padding-left: 20px;
            font-size: clamp(12px, 2vw, 15px); 
            font-weight: bold;
        }
        .content-box {
            max-width: 700px;
            margin: 20px auto;
            padding: 50px;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 30px;
            font-family: Arial;
            color: #222322;
            line-height: 3;
            text-align: justify;
        }
        .translated-word {
            position: relative;
            display: inline-block;
            white-space: nowrap;
            line-height: 1.3;
            background-color: #bfcdbf;
            color: #000000;
            padding: 4px 4px;
            border-radius: 2px;
        }
        .translation {
            position: absolute;
            top: -29px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 18px;
            background-color: #eddabc;
            color: #313a2d;
            padding: 4px 4px;
            border-radius: 1px;
            white-space: nowrap;
            z-index: 1;
            line-height: 1;
        }
        .original {
            display: inline;
            line-height: 1;
        }
        .floating-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: block;
            z-index: 1000;
        }
        #audioPlayer {
            width: 100%;
            margin-bottom: 10px;
        }
        .time-row {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .time-box-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .floating-controls p#timeDisplay {
            font-size: 28px;
            color: #FFFFFF;
            background-color: #000000;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0;
        }
        .floating-controls .time-box {
            font-size: 16px;
            color: #FFFFFF;
            background-color: #555555;
            padding: 5px 10px;
            border-radius: 5px;
            min-width: 60px;
        }
        .tua-buttons {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .control-button {
            width: 50px;
            height: 50px;
            background-color: #363535;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: inline-flex;
            justify-content: center;
            align-items: center;
        }
        .control-button:disabled {
            background-color: #888888;
            cursor: not-allowed;
        }
        .control-button:hover:not(:disabled) {
            background-color: #000000;
        }
        .pause-play-button {
            background-color: #FF4500;
        }
        .pause-play-button:hover {
            background-color: #CC3700;
        }
        .toggle-button {
            background-color: #4682B4;
        }
        .toggle-button:hover {
            background-color: #36648B;
        }
        .loop-button {
            background-color: #3c923c;
        }
        .loop-button:hover {
            background-color: #347d34;
        }
        .clear-button {
            background-color: #bc3f13;
        }
        .clear-button:hover {
            background-color: #d15124;
        }
        .active {
            background-color: #ffffff; 
            border-radius: 5px;
        }
        @media (max-width: 400px) {
            .control-button {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            .floating-controls p#timeDisplay {
                font-size: 20px;
            }
            .floating-controls .time-box {
                font-size: 12px;
                min-width: 50px;
            }
        }
        #quizContainer {
            display: none;
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            color: #53686f;
            font-size: 25px;
            font-weight: bold;
        }
        .question {
            margin-bottom: 20px;
            padding: 18px;
            color: #53686f;
            border: 5px solid #53686f;
            border-radius: 10px;
            background-color: #ffffff;
            font-size: 20px;
            font-weight: bold;
        }
        .options label {
            display: block;
            margin: 15px 0;
            cursor: pointer;
            color: #21292c;
            font-size: 16px;
            font-weight: bold;
        }
        #result {
            margin-top: 20px;
            padding: 10px;
            display: none;
            border: 5px solid #53686f;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            background-color: #ffffff;
            color: #007a33;
        }
        .wrong-answer {
            color: #f65936;
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
        }
        #submitQuiz {
            font-family: Arial, sans-serif;
            padding: 10px 20px;
            border: 3px solid #53686f;
            background-color: #FF6820;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }
        #submitQuiz:hover {
            background-color: #ff844a;
        }
        .floating-mode-bar {
            position: fixed;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #68838B;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0px 5px rgba(0, 0, 0, 1);
            display: flex;
            justify-content: center;
            gap: 20px;
            z-index: 1000;
            width: 900px;
        }
        .mode-button {
            padding: 10px 20px;
            border: 0px solid #ccc;
            background: #95a8ad;
            color: #293437;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: border-color 0.3s;
        }
        .mode-button.active {
            border: 2px solid #ffffff;
            background: #f0f0f0;
            color: #293437;
        }




                
                /*-------------------------Thiet Lap Cho Di Dong-----------------------------------*/
        @media (max-width: 768px) { 
            body {
            background-color: #f7fbf3;
            margin-bottom: 60px;
        }
        #infoBox { 
            width: 90%; 
            height: 120px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 60px; 
            font-weight: bold;
        }
        #contactBox { 
            width: 90%; 
            height: 50px; 
            margin: 0px auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: left; 
            padding-left: 20px;
            font-size: 20px; 
            font-weight: bold;
        }
        .content-box {
            max-width: 700px;
            margin: 10px auto;
            padding: 20px;
                        padding-top: 50px;
                        padding-bottom: 90px;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 19px;
            font-family: Arial;
            color: #222322;
            line-height: 3.5;
            text-align: justify;
        }
        .translated-word {
            position: relative;
            display: inline-block;
            white-space: nowrap;
            line-height: 1.3;
            background-color: #bfcdbf;
            color: #000000;
            padding: 3px 3px;
            border-radius: 2px;
        }
        .translation {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 13px;
            background-color: #eddabc;
            color: #313a2d;
            padding: 4px 4px;
            border-radius: 1px;
            white-space: nowrap;
            z-index: 1;
            line-height: 1;
        }
        .original {
            display: inline;
            line-height: 1;
        }
        .floating-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: block;
            z-index: 1000;
        }
        #audioPlayer {
            width: 100%;
            margin-bottom: 10px;
        }
        .time-row {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .time-box-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .floating-controls p#timeDisplay {
            font-size: 28px;
            color: #FFFFFF;
            background-color: #000000;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0;
        }
        .floating-controls .time-box {
            font-size: 16px;
            color: #FFFFFF;
            background-color: #555555;
            padding: 5px 10px;
            border-radius: 5px;
            min-width: 60px;
        }
        .tua-buttons {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .control-button {
            width: 50px;
            height: 50px;
            background-color: #363535;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: inline-flex;
            justify-content: center;
            align-items: center;
        }
        .control-button:disabled {
            background-color: #888888;
            cursor: not-allowed;
        }
        .control-button:hover:not(:disabled) {
            background-color: #000000;
        }
        .pause-play-button {
            background-color: #FF4500;
        }
        .pause-play-button:hover {
            background-color: #CC3700;
        }
        .toggle-button {
            background-color: #4682B4;
        }
        .toggle-button:hover {
            background-color: #36648B;
        }
        .loop-button {
            background-color: #3c923c;
        }
        .loop-button:hover {
            background-color: #347d34;
        }
        .clear-button {
            background-color: #bc3f13;
        }
        .clear-button:hover {
            background-color: #d15124;
        }
        .active {
            background-color: #ffffff; 
            border-radius: 5px;
        }
        @media (max-width: 400px) {
            .control-button {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            .floating-controls p#timeDisplay {
                font-size: 20px;
            }
            .floating-controls .time-box {
                font-size: 12px;
                min-width: 50px;
            }
        }
        #quizContainer {
            display: none;
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            color: #53686f;
            font-size: 25px;
            font-weight: bold;
        }
        .question {
            margin-bottom: 20px;
            padding: 18px;
            color: #53686f;
            border: 5px solid #53686f;
            border-radius: 10px;
            background-color: #ffffff;
            font-size: 16px;
            font-weight: bold;
        }
        .options label {
            display: block;
            margin: 15px 0;
            cursor: pointer;
            color: #21292c;
            font-size: 16px;
            font-weight: bold;
        }
        #result {
            margin-top: 20px;
            padding: 10px;
            display: none;
            border: 5px solid #53686f;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            background-color: #ffffff;
            color: #007a33;
        }
        .wrong-answer {
            color: #f65936;
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
        }
        #submitQuiz {
            font-family: Arial, sans-serif;
            padding: 10px 20px;
            border: 3px solid #53686f;
            background-color: #FF6820;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }
        #submitQuiz:hover {
            background-color: #ff844a;
        }
        .floating-mode-bar {
            position: fixed;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #68838B;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0px 5px rgba(0, 0, 0, 1);
            display: flex;
            justify-content: center;
            gap: 20px;
            z-index: 1000;
            width: 100%;
        }
        .mode-button {
            padding: 10px 20px;
            border: 0px solid #ccc;
            background: #95a8ad;
            color: #293437;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: border-color 0.3s;
        }
        .mode-button.active {
            border: 2px solid #ffffff;
            background: #f0f0f0;
            color: #293437;
        }
}
    </style>
</head>
<body>
    <div id="infoBox">习得越南语</div>
    <div id="contactBox">讲师-阮玉煌 | Weixin：XiDeYueNanYu</div>
    <div id="contentContainer">
        <div class="content-box" id="content"></div>
    </div>
    <div id="quizContainer">
        <h1>回答下面问题</h1>
        <form id="quizForm">
            <div id="questions"></div>
            <button type="button" id="submitQuiz" onclick="checkAnswers()">提交</button>
        </form>
        <div id="result"></div>
    </div>
    <div class="floating-controls" id="floatingControls">
        <audio id="audioPlayer" src="lesson.mp3" controls></audio>
        <div class="time-row">
            <p id="timeDisplay">00:00</p>
            <div class="time-box-group">
                <span class="time-box" id="loopStart">--:--</span>
                <span class="time-box" id="loopEnd">--:--</span>
            </div>
            <div class="button-group">
                <button class="control-button loop-button" id="loopButton">听</button>
                <button class="control-button clear-button" id="clearButton">删</button>
            </div>
        </div>
        <div class="tua-buttons">
            <button class="control-button" id="rewind5sButton">-5s</button>
            <button class="control-button" id="rewind1sButton">-1s</button>
            <button class="control-button" id="forward1sButton">+1s</button>
            <button class="control-button" id="forward5sButton">+5s</button>
        </div>
        <div class="action-buttons">
            <button class="control-button pause-play-button" id="pausePlayButton">播</button>
            <button class="control-button toggle-button" id="toggleControlsButton">藏</button>
        </div>
    </div>
    <div class="floating-mode-bar">
        <button class="mode-button active" id="contentMode">内容</button>
        <button class="mode-button" id="quizMode">回答问题</button>
    </div>

    <script>

const textContentData = [
    `Tiệm cắt tóc nhân ái: Lan tỏa tình người ở Thành phố Hồ Chí Minh.
Giữa nhịp sống tấp nập của Thành phố Hồ Chí Minh, nơi những con đường luôn rộn ràng người qua lại, một tiệm cắt tóc nhỏ trên đường Hùng Vương, Quận 10, đã trở thành điểm sáng của lòng nhân ái với tấm biển giản dị: “Cắt tóc miễn phí cho người bán vé số, nhặt ve chai.” Tiệm tóc của anh Lê Hữu Nam, một chàng trai 27 tuổi quê ở Bình Thuận, không chỉ mang đến những mái tóc gọn gàng mà còn lan tỏa tinh thần tử tế, khơi dậy niềm tin vào những giá trị nhân văn trong cộng đồng.
    Mỗi ngày, tiệm tóc của anh Nam đón tiếp những vị khách đặc biệt – những người bán vé số, nhặt ve chai, hoặc lao động phổ thông với hoàn cảnh khó khăn. Một trong số đó là bà Ngọc Anh, 73 tuổi, người đã nhiều tháng không cắt tóc vì lo lắng chi phí. Khi bước vào tiệm với chút e ngại, bà được anh Nam niềm nở chào đón, mời uống nước, và đích thân cắt tóc. “Mái tóc ngắn giúp tôi mát mẻ hơn, nhưng điều khiến tôi xúc động là sự chân thành của anh chủ tiệm, người không chỉ từ chối nhận tiền mà còn hứa mua vài tờ vé số để ủng hộ tôi,” bà Ngọc Anh chia sẻ. Hành động này không chỉ giúp bà tiết kiệm chi phí mà còn mang lại niềm vui giản dị, tiếp thêm động lực cho những ngày mưu sinh vất vả.
    Tiệm cắt tóc miễn phí của anh Nam bắt nguồn từ cảm hứng trên mạng xã hội, khi anh chứng kiến một đồng nghiệp thực hiện hoạt động tương tự. Với kinh nghiệm từng tham gia thiện nguyện ở các vùng sâu, vùng xa, anh quyết định biến tiệm tóc của mình thành một không gian sẻ chia. “Tôi chọn nghề cắt tóc không chỉ để kiếm thu nhập mà còn để hỗ trợ những người cần giúp đỡ trong khả năng của mình,” anh bày tỏ. Để khuyến khích những vị khách còn ngại ngùng, anh thường trò chuyện thân tình, lắng nghe câu chuyện về gia đình, bệnh tật, hay những khó khăn của họ, đồng thời hướng dẫn họ giới thiệu tiệm cho những người khác.
    Hành động tử tế của anh Nam không chỉ dừng lại ở việc cung cấp dịch vụ miễn phí. Tiệm tóc còn trở thành cầu nối để cộng đồng tham gia đóng góp. Nhiều khách hàng, như bà Lê Thị Tuyết Mai, 51 tuổi, thường xuyên đến tiệm và bày tỏ sự ngưỡng mộ trước tấm lòng của anh. “Làm việc thiện không hề dễ dàng, bởi cần cả cái tâm và nguồn lực để duy trì. Hành động của anh Nam là một tấm gương sáng, truyền cảm hứng để nhiều người cùng lan tỏa lòng tốt,” bà Mai nhận xét. Nhờ sự ủng hộ của khách hàng, tiệm tóc không chỉ duy trì được hoạt động thiện nguyện mà còn giúp anh Nam trang trải cuộc sống và tiếp tục sứ mệnh của mình.
    Đằng sau thành công của tiệm tóc là sự đồng hành của bạn gái anh Nam, người đã ở bên anh suốt tám năm, chia sẻ mọi niềm vui và khó khăn. “Cô ấy là nguồn động lực lớn nhất, giúp tôi kiên trì với nghề và với những việc làm ý nghĩa,” anh tâm sự. Tiệm tóc nhỏ ấy, với tiếng kéo lách cách và những câu chuyện rôm rả, đã trở thành biểu tượng của sự gắn kết. Những người xa lạ, từ khách hàng đến người nhận dịch vụ miễn phí, tìm thấy ở đây sự ấm áp và niềm tin vào lòng tốt. Với anh Nam, mỗi mái tóc được cắt gọn không chỉ là một dịch vụ mà còn là một cơ hội để tiếp thêm hy vọng, làm đẹp cho cuộc sống của những người xung quanh.`
];
const dictionary = {
    "tiệm cắt tóc": "理发店",
    "nhân ái": "仁爱",
    "lan tỏa": "传播",
    "tình người": "人情",
    "nhịp sống": "生活节奏",
    "tấp nập": "熙熙攘攘",
    "con đường": "街道",
    "rộn ràng": "热闹",
    "điểm sáng": "亮点",
    "lòng": "心",
    "tấm biển": "招牌",
    "giản dị": "朴素",
    "miễn phí": "免费",
    "người bán vé số": "彩票小贩",
    "nhặt ve chai": "捡瓶子",
    "tiệm tóc": "理发店",
    "mái tóc": "头发",
    "gọn gàng": "整齐",
    "tinh thần": "精神",
    "tử tế": "善良",
    "khơi dậy": "激发",
    "niềm tin": "信任",
    "giá trị": "价值",
    "nhân văn": "人文",
    "cộng đồng": "社区",
    "vị khách": "客人",
    "đặc biệt": "特别",
    "lao động phổ thông": "普通劳动者",
    "hoàn cảnh": "处境",
    "khó khăn": "困难",
    "lo lắng": "担心",
    "chi phí": "费用",
    "e ngại": "犹豫",
    "niềm nở": "热情",
    "chào đón": "欢迎",
    "mời": "邀请",
    "uống nước": "喝水",
    "đích thân": "亲自",
    "mát mẻ": "凉爽",
    "xúc động": "感动",
    "chân thành": "真诚",
    "chủ tiệm": "店主",
    "từ chối": "拒绝",
    "nhận": "接受",
    "hứa": "承诺",
    "mua": "买",
    "tờ vé số": "彩票",
    "ủng hộ": "支持",
    "tiết kiệm": "节省",
    "niềm vui": "快乐",
    "động lực": "动力",
    "mưu sinh": "谋生",
    "vất vả": "辛苦",
    "bắt nguồn": "起源于",
    "cảm hứng": "灵感",
    "mạng xã hội": "社交媒体",
    "chứng kiến": "见证",
    "đồng nghiệp": "同事",
    "thực hiện": "实施",
    "hoạt động": "活动",
    "tương tự": "类似",
    "kinh nghiệm": "经验",
    "tham gia": "参加",
    "thiện nguyện": "志愿",
    "vùng sâu": "偏远地区",
    "vùng xa": "边远地区",
    "quyết định": "决定",
    "biến": "转变",
    "không gian": "空间",
    "sẻ chia": "分享",
    "chọn": "选择",
    "nghề": "职业",
    "kiếm": "赚",
    "thu nhập": "收入",
    "hỗ trợ": "帮助",
    "giúp đỡ": "帮助",
    "khả năng": "能力",
    "khuyến khích": "鼓励",
    "ngại ngùng": "害羞",
    "trò chuyện": "聊天",
    "thân tình": "亲切",
    "lắng nghe": "倾听",
    "câu chuyện": "故事",
    "gia đình": "家庭",
    "bệnh tật": "疾病",
    "hướng dẫn": "指导",
    "giới thiệu": "介绍",
    "dừng lại": "停止",
    "cung cấp": "提供",
    "dịch vụ": "服务",
    "cầu nối": "桥梁",
    "tham gia": "参与",
    "đóng góp": "贡献",
    "khách hàng": "顾客",
    "bày tỏ": "表达",
    "ngưỡng mộ": "钦佩",
    "tấm lòng": "心意",
    "việc thiện": "善事",
    "dễ dàng": "容易",
    "cái tâm": "善心",
    "nguồn lực": "资源",
    "duy trì": "维持",
    "tấm gương": "榜样",
    "sáng": "明亮",
    "truyền cảm hứng": "启发",
    "lòng tốt": "善意",
    "nhận xét": "评论",
    "sự ủng hộ": "支持",
    "trang trải": "支付",
    "cuộc sống": "生活",
    "sứ mệnh": "使命",
    "đằng sau": "背后",
    "thành công": "成功",
    "đồng hành": "陪伴",
    "bạn gái": "女朋友",
    "chia sẻ": "分享",
    "niềm vui": "快乐",
    "nguồn động lực": "动力来源",
    "lớn nhất": "最大",
    "kiên trì": "坚持",
    "nghề": "职业",
    "việc làm": "工作",
    "ý nghĩa": "意义",
    "tâm sự": "倾诉",
    "tiếng kéo": "剪刀声",
    "lách cách": "咔嚓声",
    "rôm rả": "热闹",
    "biểu tượng": "象征",
    "gắn kết": "连接",
    "người xa lạ": "陌生人",
    "tìm thấy": "找到",
    "ấm áp": "温暖",
    "hy vọng": "希望",
    "làm đẹp": "美化",
    "xung quanh": "周围"
};
const quizData = [
    {
        question: "Tại sao bà Ngọc Anh cảm thấy xúc động khi đến tiệm cắt tóc của anh Nam?",
        options: ["Vì đây là lần đầu bà được cắt tóc miễn phí", "Vì anh Nam từ chối nhận tiền và mua vé số để ủng hộ bà", "Vì bà được xuất hiện trên mạng xã hội", "Vì bà được nhận quà sau khi cắt tóc"],
        correct: "Vì anh Nam từ chối nhận tiền và mua vé số để ủng hộ bà"
    },
    {
        question: "Nguồn cảm hứng ban đầu nào khiến anh Nam mở tiệm cắt tóc miễn phí?",
        options: ["Trải nghiệm tuổi thơ khó khăn", "Lời khuyên của bạn gái", "Học theo một đồng nghiệp từng chia sẻ trên mạng xã hội", "Một lần đi thiện nguyện ở miền Trung"],
        correct: "Học theo một đồng nghiệp từng chia sẻ trên mạng xã hội"
    },
    {
        question: "Mục đích chính của anh Nam khi mở tiệm cắt tóc là gì?",
        options: ["Quảng bá thương hiệu cá nhân", "Duy trì thu nhập và hỗ trợ người có hoàn cảnh khó khăn", "Gây quỹ từ thiện qua cắt tóc", "Kêu gọi quyên góp từ cộng đồng"],
        correct: "Duy trì thu nhập và hỗ trợ người có hoàn cảnh khó khăn"
    },
    {
        question: "Chi tiết nào sau đây không đúng với nội dung bài viết?",
        options: ["Anh Nam từng tham gia các chương trình thiện nguyện vùng sâu", "Tiệm tóc hoạt động dựa hoàn toàn vào tiền ủng hộ", "Một số khách hàng đã giới thiệu tiệm cho người khó khăn khác", "Tiệm tạo không gian sẻ chia qua trò chuyện với khách"],
        correct: "Tiệm tóc hoạt động dựa hoàn toàn vào tiền ủng hộ"
    },
    {
        question: "Phát biểu nào dưới đây thể hiện đúng thái độ của bà Tuyết Mai?",
        options: ["Hoài nghi việc làm của anh Nam", "Đồng tình nhưng cho rằng không bền vững", "Ngưỡng mộ và xem đó là nguồn cảm hứng", "Phản đối vì cho rằng gây sự lệ thuộc"],
        correct: "Ngưỡng mộ và xem đó là nguồn cảm hứng"
    },
    {
        question: "Câu nào dưới đây mô tả chính xác nhất vai trò của bạn gái anh Nam trong bài?",
        options: ["Là người khuyến khích anh học nghề cắt tóc", "Là người đứng sau điều hành hoạt động tài chính của tiệm", "Là người ủng hộ và đồng hành cùng anh suốt hành trình", "Là khách hàng đầu tiên của tiệm cắt tóc miễn phí"],
        correct: "Là người ủng hộ và đồng hành cùng anh suốt hành trình"
    },
    {
        question: "Tác giả nhấn mạnh yếu tố nào khiến tiệm tóc trở nên đặc biệt trong cộng đồng?",
        options: ["Cung cấp dịch vụ chuyên nghiệp với giá rẻ", "Mở cửa 24/7 không nghỉ", "Là nơi hội tụ của người nổi tiếng và người vô gia cư", "Là không gian gắn kết, sẻ chia và lan tỏa lòng tốt"],
        correct: "Là không gian gắn kết, sẻ chia và lan tỏa lòng tốt"
    },
    {
        question: "Từ “cầu nối” trong đoạn văn thứ tư gần nghĩa nhất với?",
        options: ["Phương tiện vận chuyển", "Nơi tạo ra doanh thu", "Sự kết nối giữa người làm thiện và người nhận giúp đỡ", "Chỗ trú ngụ cho người khó khăn"],
        correct: "Sự kết nối giữa người làm thiện và người nhận giúp đỡ"
    },
    {
        question: "Câu nào sau đây thể hiện rõ tác động lan tỏa của tiệm tóc đến cộng đồng?",
        options: ["Người dân đổ xô đến tiệm chỉ để chụp ảnh", "Một số người mang đồ ăn đến chia sẻ cùng người nhận cắt tóc", "Khách hàng giới thiệu thêm người cần giúp đỡ", "Có người nổi tiếng đến ủng hộ anh Nam"],
        correct: "Khách hàng giới thiệu thêm người cần giúp đỡ"
    },
    {
        question: "Câu “...tiếp thêm hy vọng, làm đẹp cho cuộc sống của những người xung quanh” hàm ý điều gì?",
        options: ["Cắt tóc là nghề đơn giản, dễ học", "Hành động nhỏ có thể mang lại giá trị lớn", "Khách hàng cần cải thiện ngoại hình để dễ xin việc", "Nghề cắt tóc đang ngày càng phát triển"],
        correct: "Hành động nhỏ có thể mang lại giá trị lớn"
    },
    {
        question: "Vì sao anh Nam thường trò chuyện với khách nghèo?",
        options: ["Để tìm hiểu thông tin cá nhân và hỗ trợ về sau", "Để xoa dịu tâm lý e ngại, tạo cảm giác thân thiện", "Để thuyết phục họ ủng hộ tài chính", "Để viết sách về những mảnh đời khó khăn"],
        correct: "Để xoa dịu tâm lý e ngại, tạo cảm giác thân thiện"
    },
    {
        question: "Chức năng chính của toàn bài viết là gì?",
        options: ["Phân tích thị trường dịch vụ miễn phí tại TP.HCM", "Trình bày một mô hình kinh doanh mới", "Ca ngợi nghĩa cử đẹp và tác động lan tỏa trong cộng đồng", "Phê phán hệ thống dịch vụ công còn thiếu bao phủ"],
        correct: "Ca ngợi nghĩa cử đẹp và tác động lan tỏa trong cộng đồng"
    }
];
                
        // Xử lý hiển thị văn bản với từ điển
        const content = document.getElementById('content');
        function renderText() {
            let html = textContentData[0].replace(/\n/g, "<br>");
            const sortedKeys = Object.keys(dictionary).sort((a, b) => b.length - a.length);
            sortedKeys.forEach(key => {
                const regex = new RegExp(`(^|\\s|[.,])(${key})(\\s|[.,]|$)`, 'g');
                html = html.replace(regex, `$1<span class="translated-word"><span class="translation">${dictionary[key]}</span><span class="original">$2</span></span>$3`);
            });
            content.innerHTML = html;
        }

        // Gọi hàm renderText khi khởi tạo
        renderText();

        // Xử lý audio và bảng điều khiển
        const audioPlayer = document.getElementById("audioPlayer");
        const floatingControls = document.getElementById("floatingControls");
        const timeDisplay = floatingControls.querySelector("#timeDisplay");
        const loopStart = floatingControls.querySelector("#loopStart");
        const loopEnd = floatingControls.querySelector("#loopEnd");
        const loopButton = floatingControls.querySelector("#loopButton");
        const clearButton = floatingControls.querySelector("#clearButton");
        const rewind5sButton = floatingControls.querySelector("#rewind5sButton");
        const rewind1sButton = floatingControls.querySelector("#rewind1sButton");
        const forward1sButton = floatingControls.querySelector("#forward1sButton");
        const forward5sButton = floatingControls.querySelector("#forward5sButton");
        const pausePlayButton = floatingControls.querySelector("#pausePlayButton");
        const toggleControlsButton = floatingControls.querySelector("#toggleControlsButton");
        const tuaButtons = floatingControls.querySelector(".tua-buttons");

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateTimeDisplay(displayElement) {
            displayElement.textContent = formatTime(audioPlayer.currentTime);
        }

        let customLoopStart = null;
        let customLoopEnd = null;
        let clickCount = 0;
        let isLooping = false;

        const updateInterval = setInterval(() => updateTimeDisplay(timeDisplay), 1000);

        audioPlayer.ontimeupdate = function() {
            updateTimeDisplay(timeDisplay);
            if (isLooping && customLoopStart !== null && customLoopEnd !== null) {
                if (audioPlayer.currentTime >= customLoopEnd) {
                    audioPlayer.currentTime = customLoopStart;
                }
            }
        };

        timeDisplay.onclick = () => {
            if (audioPlayer.paused) {
                clickCount++;
                if (clickCount === 1) {
                    customLoopStart = audioPlayer.currentTime;
                    loopStart.textContent = formatTime(customLoopStart);
                } else if (clickCount === 2) {
                    customLoopEnd = audioPlayer.currentTime;
                    if (customLoopEnd <= customLoopStart) {
                        customLoopEnd = null;
                        loopEnd.textContent = "--:--";
                    } else {
                        loopEnd.textContent = formatTime(customLoopEnd);
                    }
                    clickCount = 0;
                }
            }
        };

        rewind5sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 5);
                updateTimeDisplay(timeDisplay);
            }
        };
        rewind1sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 1);
                updateTimeDisplay(timeDisplay);
            }
        };
        forward1sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 1);
                updateTimeDisplay(timeDisplay);
            }
        };
        forward5sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 5);
                updateTimeDisplay(timeDisplay);
            }
        };

        pausePlayButton.onclick = () => {
            if (audioPlayer.paused) {
                audioPlayer.play();
                pausePlayButton.textContent = "停";
            } else {
                audioPlayer.pause();
                pausePlayButton.textContent = "播";
            }
        };

        loopButton.onclick = () => {
            if (customLoopStart !== null && customLoopEnd !== null) {
                audioPlayer.currentTime = customLoopStart;
                audioPlayer.play();
                isLooping = true;
                rewind5sButton.disabled = true;
                rewind1sButton.disabled = true;
                forward1sButton.disabled = true;
                forward5sButton.disabled = true;
            }
        };

        clearButton.onclick = () => {
            customLoopStart = null;
            customLoopEnd = null;
            loopStart.textContent = "--:--";
            loopEnd.textContent = "--:--";
            clickCount = 0;
            isLooping = false;
            rewind5sButton.disabled = false;
            rewind1sButton.disabled = false;
            forward1sButton.disabled = false;
            forward5sButton.disabled = false;
        };

        let controlsVisible = true;
        toggleControlsButton.onclick = () => {
            if (controlsVisible) {
                timeDisplay.style.display = "none";
                tuaButtons.style.display = "none";
                pausePlayButton.style.display = "none";
                loopStart.style.display = "none";
                loopEnd.style.display = "none";
                loopButton.style.display = "none";
                clearButton.style.display = "none";
                toggleControlsButton.textContent = "示";
                controlsVisible = false;
            } else {
                timeDisplay.style.display = "inline-block";
                tuaButtons.style.display = "flex";
                pausePlayButton.style.display = "inline-flex";
                loopStart.style.display = "inline-block";
                loopEnd.style.display = "inline-block";
                loopButton.style.display = "inline-flex";
                clearButton.style.display = "inline-flex";
                toggleControlsButton.textContent = "藏";
                controlsVisible = true;
            }
        };

        audioPlayer.onpause = audioPlayer.onended = function() {
            pausePlayButton.textContent = "播";
        };


        // Biến lưu trữ vị trí cuộn và lựa chọn
        let contentScrollPosition = 0;
        let quizScrollPosition = 0;
        let userSelections = {};
        let isSubmitted = false;

        // Hiển thị câu hỏi và khôi phục lựa chọn
        function loadQuiz() {
            const questionsDiv = document.getElementById('questions');
            questionsDiv.innerHTML = '';
            quizData.forEach((item, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                
                const questionTitle = document.createElement('h3');
                questionTitle.textContent = `Câu ${index + 1}: ${item.question}`;
                questionDiv.appendChild(questionTitle);

                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options';
                
                item.options.forEach(option => {
                    const label = document.createElement('label');
                    const isChecked = userSelections[`question${index}`] === option ? 'checked' : '';
                    label.innerHTML = `
                        <input type="radio" name="question${index}" value="${option}" ${isChecked}>
                        ${option}
                    `;
                    optionsDiv.appendChild(label);
                });

                questionDiv.appendChild(optionsDiv);
                questionsDiv.appendChild(questionDiv);
            });

            // Khôi phục vị trí cuộn
            window.scrollTo(0, quizScrollPosition);
        }

        // Lưu lựa chọn của người dùng
        function saveSelections() {
            quizData.forEach((_, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    userSelections[`question${index}`] = selected.value;
                }
            });
        }

        // Kiểm tra đáp án
        function checkAnswers() {
            let score = 0;
            const total = quizData.length;
            let wrongAnswers = [];
            
            quizData.forEach((item, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    if (selected.value === item.correct) {
                        score++;
                    } else {
                        wrongAnswers.push({
                            question: item.question,
                            selected: selected.value,
                            correct: item.correct
                        });
                    }
                } else {
                    wrongAnswers.push({
                        question: item.question,
                        selected: "未选择",
                        correct: item.correct
                    });
                }
            });

            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <h3>YD5-结果: ${score}/${total} 答案正确</h3>
                <p>比例: ${(score/total * 100).toFixed(2)}%</p>
            `;

            if (wrongAnswers.length > 0) {
                resultDiv.innerHTML += '<h4>错误答案:</h4>';
                wrongAnswers.forEach((wrong, index) => {
                    resultDiv.innerHTML += `
                        <div class="wrong-answer">
                            Câu ${quizData.findIndex(q => q.question === wrong.question) + 1}: ${wrong.question}<br>
                            你的选择: ${wrong.selected} - 正确答案: ${wrong.correct}
                        </div>
                    `;
                });
            } else {
                resultDiv.innerHTML += '<p>回答正确所有问题</p>';
            }

            resultDiv.scrollIntoView({ behavior: 'smooth' });
            isSubmitted = true; // Đánh dấu đã nộp bài
        }

        // Xử lý chế độ hiển thị
        const contentModeButton = document.getElementById('contentMode');
        const quizModeButton = document.getElementById('quizMode');
        const contentContainer = document.getElementById('contentContainer');
        const quizContainer = document.getElementById('quizContainer');

        contentModeButton.addEventListener('click', () => {
            // Lưu vị trí cuộn của quiz trước khi chuyển
            quizScrollPosition = window.scrollY;
            saveSelections(); // Lưu lựa chọn của người dùng
            
            contentContainer.style.display = 'block';
            quizContainer.style.display = 'none';
            contentModeButton.classList.add('active');
            quizModeButton.classList.remove('active');
            floatingControls.style.display = 'block';
            renderText();
            
            // Khôi phục vị trí cuộn của content
            window.scrollTo(0, contentScrollPosition);
        });

        quizModeButton.addEventListener('click', () => {
            // Lưu vị trí cuộn của content trước khi chuyển
            contentScrollPosition = window.scrollY;
            saveSelections(); // Lưu lựa chọn của người dùng
            
            contentContainer.style.display = 'none';
            quizContainer.style.display = 'block';
            quizModeButton.classList.add('active');
            contentModeButton.classList.remove('active');
            floatingControls.style.display = 'none';
            
            // Reset lựa chọn nếu đã nộp bài
            if (isSubmitted) {
                userSelections = {};
                isSubmitted = false;
            }
            
            loadQuiz();
        });

        // Mặc định hiển thị nội dung
        contentContainer.style.display = 'block';
        quizContainer.style.display = 'none';
    </script>
</body>
</html>